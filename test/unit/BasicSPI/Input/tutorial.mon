using com.apamax.rpi.spi;

monitor BasicSPI {
	/** @private */
	SPI SPIPlugin;
	
	action onload() {
		boolean result := SPIPlugin.init(1, 500000);

		if(not result) {
			log "Failed to setup";
			die;
		}

		integer i := 0;
		while(i < 10)
		{
			SPIPlugin.write(1);
			SPIPlugin.delay(2);
			SPIPlugin.write(0);
			SPIPlugin.delay(2);

			i := i + 1;
		}
	}
}
